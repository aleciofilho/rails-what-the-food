<div class="complete-page"></div>
  <div class="container">
    <div class="d-flex profile-container">
      <div class="sidebar">
        <div class="avatar-profile d-flex justify-content-center p-3">
          <% if current_user.photo.attached? %>
            <%= cl_image_tag current_user.photo.key, class: "user-image", alt: "user-image" %>
          <% else %>
            <%= image_tag "avatar.png", class: "user-image", alt: "avatar" %>
          <% end %>
        </div>
        <h1><%= @user.name %></h1>
        <%# <a class="sidebar-option" href="#myprofile">My Profile</a> %>
        <%= link_to "My recipes", user_path(@current_user), class:"sidebar-option" %>
        <%# <a class="sidebar-option" href="#myfridge">My Fridge</a> %>
      </div>

      <div class="content">

        <div class="fav-recipes">
          <h1>My Fridge</h1>

          <!-- Podem mexer a vontade nos cards, eu sÃ³ queria ver se as infos estavam todas certas -->
          <!-- style: _card.scss -->
            <div data-fridge-target="ingredients">
              <% current_user.fridges.each do |fridge| %>
                <div class="btn btn-primary btn-sm mb-1 button-ingredient" >
                  <%= fridge.ingredient.name %>
                  <div class="button-delete rounded-circle">
                    <%= link_to "x",
                                fridge_path(fridge),
                                method: :delete,
                                data: { :confirm => 'Are you sure?'},
                                style: "color: white;" %>
                  </div>
                </div>
              <% end %>
            </div>
            <p>Add the ingredients you have in your house:</p>
            <div data-controller="display-recipes fridge">
            <div class="categories-container pb-0">
              <% @categories.each do |category| %>
                <div class="card-category mb-2 p-1">
                  <div class="card-category-header">
                    <h2><%= category.name %></h2>
                  </div>
                  <div class="card-body">
                    <% category.ingredients.first(10).each do |i|%>
                      <span class="btn btn-outline-primary btn-sm mb-1" data-display-recipes-target="ingredient"
                                                                        data-fridge-target="ingredient"
                                                                        data-action="click->display-recipes#activate">
                        <%= i.name %>
                      </span>
                    <%end%>
                  </div>
                </div>
              <% end %>
            </div>
                  <%= form_tag fridges_path(ingredient: params[:ingredient]),
                                          method: :post,
                                          class: "d-grid search-recipes",
                                          data: { action: "submit->fridge#buildQuery",
                                          fridge_target: "form" }  do %>
                  <%= text_field_tag :ingredients,
                      nil,
                      type: :hidden,
                      data: { fridge_target: "input" }%>
                  <%= submit_tag "Add to your fridge", class: "btn btn-primary" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
