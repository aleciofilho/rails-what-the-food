<div class="container py-1">
  <div class="row">
    <div class="col-3">
      <div class="pantry-header">
        <h2> Ingredients</h2>

        <%= form_tag pages_path, method: :get, class: "d-flex pantry-search-bar" do %>
          <%= text_field_tag :query,
            params[:query],
            class: "form-control",
            placeholder: "add/remove ingredients"
          %>
          <%= submit_tag "Search", class: "btn btn-primary" %>
        <% end %>

        <% if @ingredients %>
          <div class="d-flex searched-ingredients">
            <% @ingredients.each do |i| %>
              <span class="btn btn-primary"><%= i.name %></span>
            <% end %>
          </div>
        <% end %>
      </div>

      <div class="categories-container" data-controller="display-recipes">
        <% @categories.each do |category| %>
          <div class="card-category mb-2 p-1">
            <div class="card-category-header">
              <h2><%= category.name %></h2>
            </div>
            <div class="card-body">
              <% category.ingredients.first(5).each do |i|%>
                <span class="btn btn-outline-primary btn-sm mb-1" data-display-recipes-target="ingredient" data-action="click->display-recipes#activate">
                  <%= i.name %>
                </span>
              <%end%>
            </div>
          </div>
        <% end %>

        <%= form_tag pages_path, class: "d-grid" do %>
          <%= text_field_tag :query,
              params[:query],
              class: "form-control",
              type: :hidden,
              data: { display_recipes_target: "input" }%>
          <%= submit_tag "Search recipes", method: :get,
                                          class: "btn btn-primary search-recipes",
                                          data: { action: "submit->display-recipes#buildQuery" } %>
        <% end %>

      </div>



      <%#= simple_form_for @categories, method: :get do |f| %>
        <%# @categories.each do |category| %>
          <%# <div class="card-category mb-2 p-1"> %>
            <%# <div class="card-category-header"> %>
              <%# <h2><%= category.name %>
            <%# </div> %>
            <%# <div class="card-body"> %>
              <%# <% category.ingredients.first(5).each do |i|%>
                <%# <%= f.association :ingredients, as: :check_boxes %>
              <%# <%end%>
            <%# </div> %>
          <%# </div> %>
        <%# <% end %>
      <%# <% end %>
    </div>
    <div class="col-9">
      <div class="container">
        <div class="row justify-content-center">
          <% if @recipes %>
            <% @recipes.each do |recipe| %>
              <div class="card col-4 col-sm-8 m-1 fit-content" style="width: 18rem;" data-controller="show-details" data-show-details-target="card">
                <%= image_tag recipe['image'], class: "card-img-top" %>
                <div class="card-body ">
                  <a href="#" class="card-title" data-action="click->show-details#show"><%= recipe['title'] %></a>
                  <p class="card-text"><%= recipe['likes'] %></p>

                  <span hidden data-show-details-target="id"><%= recipe['id'] %></span>
                  <div class="more-info" data-show-details-target="info">
                  </div>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
